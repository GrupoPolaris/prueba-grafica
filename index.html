<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Buscador de Proyectos</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Filtros a la izquierda -->
    <div class="filters">
      <h2>Filtros</h2>
      
      <!-- Cargar archivo Excel -->
      <input type="file" id="fileInput" accept=".xlsx, .xls" onchange="loadExcel(event)">
      
      <!-- Filtro por Título -->
      <div class="filter-group">
        <label for="title">Buscar por Título:</label>
        <input type="text" id="title" oninput="updateFilters()" placeholder="Buscar...">
      </div>
      
      <!-- Filtro por Año -->
      <div class="filter-group">
        <label for="year">Año:</label>
        <select id="year" onchange="updateFilters()">
          <option value="all">Todos</option>
        </select>
      </div>

      <!-- Filtro por Comunidad Autónoma -->
      <div class="filter-group">
        <label for="region">Comunidad Autónoma:</label>
        <select id="region" onchange="updateFilters()">
          <option value="all">Todas</option>
        </select>
      </div>

      <!-- Filtro por Financiación -->
      <div class="filter-group">
        <label for="funding">Financiación mínima:</label>
        <input type="number" id="funding" onchange="updateFilters()" placeholder="Min. financiación">
      </div>

      <!-- Filtro por IP -->
      <div class="filter-group">
        <label for="ip">IP 1 (Investigador Principal):</label>
        <input type="text" id="ip" oninput="updateFilters()" placeholder="Buscar IP...">
      </div>
    </div>

    <!-- Resultados a la derecha -->
    <div class="results">
      <h2>Resultados</h2>
      <table id="resultsTable">
        <thead>
          <tr>
            <th>Título</th>
            <th>Año</th>
            <th>Comunidad Autónoma</th>
            <th>Financiación</th>
            <th>IP 1</th>
            <th>Universidad</th>
          </tr>
        </thead>
        <tbody>
          <!-- Los resultados se llenarán aquí dinámicamente -->
        </tbody>
      </table>

      <div id="summary">
        <p><strong>Financiación Total: </strong><span id="totalFunding">0</span> €</p>
        <p><strong>Universidades involucradas:</strong> <span id="universitiesList">Ninguna</span></p>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.1/xlsx.full.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
